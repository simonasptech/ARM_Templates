{
    "requests": [
        {
            "content": {
                "properties": {
                    "mode": "incremental",
                    "debugSetting": {
                        "detailLevel": "none"
                    },
                    "parameters": {
                        "ruleName": {
                            "value": "Heartbeat_DCR_Portal"
                        },
                        "location": {
                            "value": "uksouth"
                        },
                        "dataSources": {
                            "value": {
                                "performanceCounters": [
                                    {
                                        "counterSpecifiers": [
                                            "Processor(*)\\% Processor Time",
                                            "Processor(*)\\% Idle Time",
                                            "Processor(*)\\% User Time",
                                            "Processor(*)\\% Nice Time",
                                            "Processor(*)\\% Privileged Time",
                                            "Processor(*)\\% IO Wait Time",
                                            "Processor(*)\\% Interrupt Time",
                                            "Memory(*)\\Available MBytes Memory",
                                            "Memory(*)\\% Available Memory",
                                            "Memory(*)\\Used Memory MBytes",
                                            "Memory(*)\\% Used Memory",
                                            "Memory(*)\\Pages/sec",
                                            "Memory(*)\\Page Reads/sec",
                                            "Memory(*)\\Page Writes/sec",
                                            "Memory(*)\\Available MBytes Swap",
                                            "Memory(*)\\% Available Swap Space",
                                            "Memory(*)\\Used MBytes Swap Space",
                                            "Memory(*)\\% Used Swap Space",
                                            "Process(*)\\Pct User Time",
                                            "Process(*)\\Pct Privileged Time",
                                            "Process(*)\\Used Memory",
                                            "Process(*)\\Virtual Shared Memory",
                                            "Logical Disk(*)\\% Free Inodes",
                                            "Logical Disk(*)\\% Used Inodes",
                                            "Logical Disk(*)\\Free Megabytes",
                                            "Logical Disk(*)\\% Free Space",
                                            "Logical Disk(*)\\% Used Space",
                                            "Logical Disk(*)\\Logical Disk Bytes/sec",
                                            "Logical Disk(*)\\Disk Read Bytes/sec",
                                            "Logical Disk(*)\\Disk Write Bytes/sec",
                                            "Logical Disk(*)\\Disk Transfers/sec",
                                            "Logical Disk(*)\\Disk Reads/sec",
                                            "Logical Disk(*)\\Disk Writes/sec",
                                            "Network(*)\\Total Bytes Transmitted",
                                            "Network(*)\\Total Bytes Received",
                                            "Network(*)\\Total Bytes",
                                            "Network(*)\\Total Packets Transmitted",
                                            "Network(*)\\Total Packets Received",
                                            "Network(*)\\Total Rx Errors",
                                            "Network(*)\\Total Tx Errors",
                                            "Network(*)\\Total Collisions",
                                            "System(*)\\Uptime",
                                            "System(*)\\Load1",
                                            "System(*)\\Load5",
                                            "System(*)\\Load15",
                                            "System(*)\\Users",
                                            "System(*)\\Unique Users",
                                            "System(*)\\CPUs"
                                        ],
                                        "samplingFrequencyInSeconds": 60,
                                        "streams": [
                                            "Microsoft-Perf"
                                        ],
                                        "scheduledTransferPeriod": "PT1M",
                                        "name": "perfCounterDataSource60"
                                    }
                                ]
                            }
                        },
                        "destinations": {
                            "value": {
                                "logAnalytics": [
                                    {
                                        "workspaceResourceId": "/subscriptions/9d9f3491-56f9-4bb8-b0fd-0716d84bf582/resourceGroups/rg_uks_syslog/providers/Microsoft.OperationalInsights/workspaces/logwsuoai63ql34mra",
                                        "workspaceId": "a0057828-f675-4153-855f-cac3c45d9273",
                                        "name": "la--872302979"
                                    }
                                ]
                            }
                        },
                        "dataFlows": {
                            "value": [
                                {
                                    "streams": [
                                        "Microsoft-Perf"
                                    ],
                                    "destinations": [
                                        "la--872302979"
                                    ],
                                    "transformKql": "source",
                                    "outputStream": "Microsoft-Perf"
                                }
                            ]
                        },
                        "tagsArray": {
                            "value": {}
                        },
                        "apiVersion": {
                            "value": "2023-03-11"
                        },
                        "platformType": {
                            "value": "Linux"
                        }
                    },
                    "template": {
                        "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
                        "contentVersion": "1.0.0.0",
                        "parameters": {
                            "ruleName": {
                                "type": "String",
                                "metadata": {
                                    "description": "Specifies the name of the data collection rule to create."
                                }
                            },
                            "location": {
                                "type": "string",
                                "metadata": {
                                    "description": "Specifies the location in which to create the data collection rule."
                                }
                            },
                            "dataSources": {
                                "type": "Object",
                                "metadata": {
                                    "description": "The specification of data sources."
                                }
                            },
                            "dataFlows": {
                                "type": "Array",
                                "metadata": {
                                    "description": "The specification of data flows."
                                }
                            },
                            "destinations": {
                                "type": "Object",
                                "metadata": {
                                    "description": "The specification of destinations."
                                }
                            },
                            "tagsArray": {
                                "type": "Object"
                            },
                            "apiVersion": {
                                "type": "string",
                                "metadata": {
                                    "description": "Specifies the api version to use when deploying data collection rule template."
                                }
                            },
                            "platformType": {
                                "type": "string",
                                "metadata": {
                                    "description": "The specification of the machine os type."
                                }
                            }
                        },
                        "resources": [
                            {
                                "type": "Microsoft.Insights/dataCollectionRules",
                                "apiVersion": "[parameters('apiVersion')]",
                                "name": "[parameters('ruleName')]",
                                "location": "[parameters('location')]",
                                "properties": {
                                    "dataSources": "[parameters('dataSources')]",
                                    "destinations": "[parameters('destinations')]",
                                    "dataFlows": "[parameters('dataFlows')]",
                                    "streamDeclarations": {}
                                },
                                "tags": "[parameters('tagsArray')]",
                                "kind": "Linux"
                            }
                        ],
                        "outputs": {
                            "dataCollectionRuleId": {
                                "type": "string",
                                "value": "[resourceId('Microsoft.Insights/dataCollectionRules', parameters('ruleName'))]"
                            }
                        }
                    },
                    "tags": {
                        "primaryResourceId": "/subscriptions/9d9f3491-56f9-4bb8-b0fd-0716d84bf582/resourcegroups/rg_uks_syslog/providers/microsoft.insights/datacollectionrules/Heartbeat_DCR_Portal"
                    }
                },
                "httpMethod": "POST",
                "name": "2f37cfd1-4d0d-4c7c-ba8f-53ab603ec059",
                "requestHeaderDetails": {
                    "commandName": "Microsoft_Azure_Monitoring.Deploy.validate"
                },
                "url": "/subscriptions/9d9f3491-56f9-4bb8-b0fd-0716d84bf582/resourceGroups/rg_uks_syslog/providers/Microsoft.Resources/deployments/Microsoft.DataCollectionRules/validate?api-version=2022-12-01"
            }
        }
    ]
}